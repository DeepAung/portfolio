<div class="welcome">
  <h1 class="welcome-text">
    <div>Welcome to</div>
    <div>My <span class="primary glow">PortFolio</span></div>
    <div class="icon-wrapper">
      <i class="fa-solid fa-chevron-down"></i>
      <i class="fa-solid fa-chevron-down"></i>
      <i class="fa-solid fa-chevron-down"></i>
    </div>
  </h1>
</div>

<style>
  .welcome {
    padding: 1rem;
    height: 100vh;
    height: 100dvh;

    text-align: center;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .welcome-text {
    position: relative;

    font-family: "HorizonFont";
    font-size: clamp(1rem, 6vw, 4rem);
    font-weight: 600;
  }

  .welcome-text .glow {
    text-shadow: 0 0 20px rgb(var(--primary));
  }

  .icon-wrapper {
    position: absolute;
    top: 100%;
    width: 100%;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    margin-top: max(8vh, 3rem);
  }

  .icon-wrapper > * {
    margin-top: min(-2vw, -0.25rem);
    font-size: max(4vw, 0.5rem);
  }
</style>

<script>
  import gsap from "gsap";
  import { animValue, onAnimChanged } from "../scripts/animationToggle";

  window.addEventListener("load", () => {
    gsap
      .timeline()
      .from(".welcome .welcome-text", {
        opacity: 0,
        scale: 0.5,
        ease: "back",
        delay: 0.8,
        duration: 1,
      })
      .from(".welcome .welcome-text .icon-wrapper", {
        opacity: 0,
        duration: 1,
        onComplete: checkAnimValue,
      })
      .play();
  });

  onAnimChanged(checkAnimValue);

  function checkAnimValue() {
    const elems = document.querySelectorAll(
      ".welcome i"
    ) as NodeListOf<HTMLElement>;

    if (animValue) {
      elems.forEach((elem) => elem.classList.add("fa-bounce"));
    } else {
      elems.forEach((elem) => elem.classList.remove("fa-bounce"));
    }
  }
</script>
